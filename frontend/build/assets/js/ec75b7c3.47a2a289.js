"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1467],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),h=r,m=d["".concat(l,".").concat(h)]||d[h]||p[h]||i;return n?a.createElement(m,o(o({ref:t},c),{},{components:n})):a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,o[1]=s;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},4999:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var a=n(7462),r=(n(7294),n(3905));const i={title:"Ruby",id:"7-use-a-page-object-ruby",slug:"ruby/",number:7,publish_date:new Date("2013-07-09T00:00:00.000Z"),last_update:{date:new Date("2023-03-08T00:00:00.000Z")},tags:["page object","abstraction"],level:2,category:["tools"],language:"ruby"},o="Using a Page Object",s={unversionedId:"updated-tips/use-a-page-object/7-use-a-page-object-ruby",id:"updated-tips/use-a-page-object/7-use-a-page-object-ruby",title:"Ruby",description:"Intro",source:"@site/docs/updated-tips/7-use-a-page-object/ruby.md",sourceDirName:"updated-tips/7-use-a-page-object",slug:"/updated-tips/use-a-page-object/ruby/",permalink:"/elemental-next/docs/updated-tips/use-a-page-object/ruby/",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/updated-tips/7-use-a-page-object/ruby.md",tags:[{label:"page object",permalink:"/elemental-next/docs/tags/page-object"},{label:"abstraction",permalink:"/elemental-next/docs/tags/abstraction"}],version:"current",frontMatter:{title:"Ruby",id:"7-use-a-page-object-ruby",slug:"ruby/",number:7,publish_date:"2013-07-09T00:00:00.000Z",last_update:{date:"2023-03-08T00:00:00.000Z"},tags:["page object","abstraction"],level:2,category:["tools"],language:"ruby"},sidebar:"tutorialSidebar",previous:{title:"Ruby",permalink:"/elemental-next/docs/updated-tips/select-from-a-dropdown/ruby/"},next:{title:"CSharp",permalink:"/elemental-next/docs/updated-tips/download-a-file-revisited/csharp/"}},l={},u=[{value:"Intro",id:"intro",level:2},{value:"A Solution",id:"a-solution",level:2},{value:"Example",id:"example",level:2},{value:"Expected Behavior",id:"expected-behavior",level:2},{value:"Summary",id:"summary",level:2},{value:"About The Author",id:"about-the-author",level:2}],c={toc:u},d="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"using-a-page-object"},"Using a Page Object"),(0,r.kt)("h2",{id:"intro"},"Intro"),(0,r.kt)("p",null,"One of the biggest challenges with Selenium tests is that they can be brittle and challenging to maintain over time.\nThis is largely due to the fact that things in the app you're testing change, breaking your tests."),(0,r.kt)("p",null,"But the reality of a software project is that change is a constant. So we need to account for this reality somehow\nin our test code in order to be successful."),(0,r.kt)("h2",{id:"a-solution"},"A Solution"),(0,r.kt)("p",null,"Enter Page Objects."),(0,r.kt)("p",null,"Rather than write your test code directly against your app, you can model the behavior of your application into\nsimple objects -- and write your tests against them instead. That way when your app changes and your tests break,\nyou only have to update your test code in one place to fix it."),(0,r.kt)("p",null,"And with this approach, we not only get the benefit of controlled chaos, we also get the benefit of reusable behavior."),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)("p",null,"In this example we are going to take the following sample code and upgrade it with the use of a Page Object."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ruby"},"require 'selenium-webdriver'\nrequire 'rspec/expectations'\ninclude RSpec::Matchers\n\ndef setup\n  @driver = Selenium::WebDriver.for :firefox\n  @base_url = 'http://the-internet.herokuapp.com/dynamic_loading/2'\nend\n\ndef teardown\n  @driver.quit\nend\n\ndef run\n  setup\n  yield\n  teardown\nend\n\ndef wait_for(seconds=10)\n  Selenium::WebDriver::Wait.new(:timeout => seconds).until { yield }\nend\n\nrun do\n    @driver.get @base_url\n    @driver.find_element(css: '#start button').click\n    wait_for { @driver.find_element(css: '#finish').displayed? }\n    expect(@driver.find_element(css: '#finish').text).to eql('Hello World!')\nend\n")),(0,r.kt)("p",null,"The first order of business is pretty simple. We keep our setup, teardown, and run actions mostly the same.\nBut we change the base_url from an instance variable to an environment variable. Doing this will enable\nus to access it from anywhere in our test suite."),(0,r.kt)("p",null,"While the usage of environment variables can be a slippery slope, this is an ideal candidate for it since\nit effects the overall behavior of the suite."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ruby"},"require 'selenium-webdriver'\nrequire 'rspec/expectations'\ninclude RSpec::Matchers\n\ndef setup\n  @driver = Selenium::WebDriver.for :firefox\n  ENV['base_url'] = 'http://the-internet.herokuapp.com/dynamic_loading/2'\nend\n\ndef teardown\n  @driver.quit\nend\n\ndef run\n  setup\n  yield\n  teardown\nend\n")),(0,r.kt)("p",null,"Next we create a Page Object for the Dynamic Loading page by using a standard Ruby class and add some relevant\nbits to it."),(0,r.kt)("p",null,"At the top of it we pull out the CSS locators used in our test steps and put them into helpfully\nnamed constants to use instead. And instead of using the two part 'how', 'what' approach, we are\nusing a hash to store the locator type and its value."),(0,r.kt)("p",null,"Next we use ",(0,r.kt)("inlineCode",{parentName:"p"},"attr_reader")," to create a place to store the Selenium WebDriver instance for use throughout the class."),(0,r.kt)("p",null,"The class expects an argument (e.g. the Selenium WebDriver instance) which is received through the initialize method.\nInside the initialize method we take care of passing the Selenium object into the ",(0,r.kt)("inlineCode",{parentName:"p"},"attr_reader")," object along with\nvisiting the page and verifying that we are in the correct place. All of these things will execute in order when\nthis class is instantiated."),(0,r.kt)("p",null,"We then break out each of the test steps into methods that execute the behavior specific to the page while also\nswapping out the hard-coded CSS locators for our new CSS locator constant variables."),(0,r.kt)("p",null,"At the bottom of the class we have private helper methods. These methods aren't necessarily specific to the page\nthis class represents, but they are useful for it to function. So we want to access them within the class, but\nmake it so they're not available outside of the class. Using the private classification gets us this behavior nicely."),(0,r.kt)("p",null,"And lastly, we update the ",(0,r.kt)("inlineCode",{parentName:"p"},"displayed?")," private method to take a single argument for a 'locator' object (e.g. one of\nour CSS locator constant variables)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ruby"},"class DynamicLoading\n\n  START_BUTTON = { css: '#start button' }\n  FINISH_BUTTON = { css: '#finish' }\n\n  attr_reader :driver\n\n  def initialize(driver)\n    @driver = driver\n    visit\n    verify_page\n  end\n\n  def visit\n    driver.get ENV['base_url']\n  end\n\n  def start\n    driver.find_element(START_BUTTON).click\n  end\n\n  def finish_present?\n    wait_for { @driver.find_element(FINISH_BUTTON).displayed? }\n  end\n\n  def finish_text\n    driver.find_element(FINISH_BUTTON).text\n  end\n\n  private\n\n    def verify_page\n      expect(driver.title).to eql('The Internet')\n    end\n\n    def wait_for(seconds=10)\n      Selenium::WebDriver::Wait.new(:timeout => seconds).until { yield }\n    end\n\nend\n")),(0,r.kt)("p",null,"With our new Page Object in hand, our run action cleans up considerably. Making it more succinct and readable."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ruby"},"run do\n  dynamic_loading = DynamicLoading.new(@driver)\n  dynamic_loading.start\n  dynamic_loading.finish_present?\n  expect(dynamic_loading.finish_text).to eql('Hello World!')\nend\n")),(0,r.kt)("p",null,"It's worth noting that while we are peforming an assertion in the Page Object in our ",(0,r.kt)("inlineCode",{parentName:"p"},"verify_page"),"\naction ",(0,r.kt)("strong",{parentName:"p"},"assertions should only be performed in your test scripts")," (just like the run action above).\nUsing a ",(0,r.kt)("inlineCode",{parentName:"p"},"verify_page")," action is just a helpful exception to the rule."),(0,r.kt)("h2",{id:"expected-behavior"},"Expected Behavior"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Load Dynamic Loading page on The Internet"),(0,r.kt)("li",{parentName:"ul"},"Click on start"),(0,r.kt)("li",{parentName:"ul"},"Wait for the finish message to appear"),(0,r.kt)("li",{parentName:"ul"},"Grab the text from it"),(0,r.kt)("li",{parentName:"ul"},"Assert that the text we want is within it")),(0,r.kt)("h2",{id:"summary"},"Summary"),(0,r.kt)("p",null,"Hopefully this tip has helped you wade into the waters of Page Objects in Selenium."),(0,r.kt)("p",null,"Stay tuned for a future tip where we implement a Base Page Object class to abstract things even further\nand roll our own Domain Specific Language (DSL) for our test suite."),(0,r.kt)("p",null,"Until then, Happy Testing!"),(0,r.kt)("h2",{id:"about-the-author"},"About The Author"),(0,r.kt)("p",null,"Dave Haeffner is the original writer of Elemental Selenium -- a free, once weekly Selenium tip newsletter that's read by\nthousands of testing professionals. He also created and maintains the-internet (an open-source web app that's perfect\nfor writing automated tests against)."),(0,r.kt)("p",null,"Dave has helped numerous companies successfully implement automated acceptance testing; including The Motley Fool,\nManTech International, Sittercity, and Animoto. He is also an active member of the Selenium project and has spoken at\nnumerous conferences and meetups around the world about automated acceptance testing."))}p.isMDXComponent=!0}}]);