"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7185],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),s=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(u.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=s(n),d=a,f=m["".concat(u,".").concat(d)]||m[d]||c[d]||l;return n?r.createElement(f,o(o({ref:t},p),{},{components:n})):r.createElement(f,o({ref:t},p))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=d;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[m]="string"==typeof e?e:a,o[1]=i;for(var s=2;s<l;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9336:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var r=n(7462),a=(n(7294),n(3905));const l={title:"Ruby",id:"57-junit-xml-ruby",slug:"ruby/",number:57,publish_date:new Date("2015-07-14T00:00:00.000Z"),last_update:{date:new Date("2023-02-22T00:00:00.000Z")},tags:["xml","junit xml","ci","continuous integration","reporting"],level:1,category:["tools"],language:"ruby"},o="How to Prepare Your Tests for Continuous Integration",i={unversionedId:"updated-tips/junit-xml/57-junit-xml-ruby",id:"updated-tips/junit-xml/57-junit-xml-ruby",title:"Ruby",description:"Intro",source:"@site/docs/updated-tips/57-junit-xml/ruby.md",sourceDirName:"updated-tips/57-junit-xml",slug:"/updated-tips/junit-xml/ruby/",permalink:"/elemental-next/docs/updated-tips/junit-xml/ruby/",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/updated-tips/57-junit-xml/ruby.md",tags:[{label:"xml",permalink:"/elemental-next/docs/tags/xml"},{label:"junit xml",permalink:"/elemental-next/docs/tags/junit-xml"},{label:"ci",permalink:"/elemental-next/docs/tags/ci"},{label:"continuous integration",permalink:"/elemental-next/docs/tags/continuous-integration"},{label:"reporting",permalink:"/elemental-next/docs/tags/reporting"}],version:"current",frontMatter:{title:"Ruby",id:"57-junit-xml-ruby",slug:"ruby/",number:57,publish_date:"2015-07-14T00:00:00.000Z",last_update:{date:"2023-02-22T00:00:00.000Z"},tags:["xml","junit xml","ci","continuous integration","reporting"],level:1,category:["tools"],language:"ruby"},sidebar:"tutorialSidebar",previous:{title:"Ruby",permalink:"/elemental-next/docs/updated-tips/wrapper/ruby/"},next:{title:"Ruby",permalink:"/elemental-next/docs/updated-tips/tagging/ruby/"}},u={},s=[{value:"Intro",id:"intro",level:2},{value:"A Solution",id:"a-solution",level:2},{value:"Example",id:"example",level:2},{value:"Summary",id:"summary",level:2},{value:"About The Author",id:"about-the-author",level:2}],p={toc:s},m="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(m,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"how-to-prepare-your-tests-for-continuous-integration"},"How to Prepare Your Tests for Continuous Integration"),(0,a.kt)("h2",{id:"intro"},"Intro"),(0,a.kt)("p",null,"If you want your Selenium tests to automatically run and report failures to you and your team, you'll want to wire them up to a ",(0,a.kt)("a",{parentName:"p",href:"http://en.wikipedia.org/wiki/Continuous_integration"},"Continuous Integration")," (CI) server."),(0,a.kt)("p",null,"In order to make the most of the Continuous Integration setup, you'll need to make sure your test suite outputs a machine readable test report. But what does this entail? How do you set it up? And will it work when running things in parallel?"),(0,a.kt)("h2",{id:"a-solution"},"A Solution"),(0,a.kt)("p",null,"CI servers work with a standardized report format called JUnit XML which is a standard offering across testing frameworks. If it's not something available off the shelf for your framework, odds are there's a plug-in to enable it."),(0,a.kt)("p",null,"The report will include test results (e.g., failure messages and stack traces) and test metrics (e.g., start time, end time, number of tests, etc.). Your CI server (once configured to do so) will consume this report after each test run and tell you when things pass and fail. It will also offer trend data over time to help determine the stability of your test suite."),(0,a.kt)("p",null,"Let's go through an example of how to configure a test suite in order to output a JUnit XML report."),(0,a.kt)("h2",{id:"example"},"Example"),(0,a.kt)("p",null,"In ",(0,a.kt)("a",{parentName:"p",href:"http://rspec.info/"},"RSpec"),", you need a plugin to configure JUnit XML output. There are two popular ones:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/natritmeyer/yarjuf"},"yarjuf (Yet Another RSpec JUnit Formatter)")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/sj26/rspec_junit_formatter"},"RSpec JUnit Formatter"))),(0,a.kt)("p",null,"Let's step through how to use the latter of the two."),(0,a.kt)("p",null,"After installing RSpec JUnit Formatter we need to specify two new parameters at run-time: a formatter, and an output file."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"rspec --format RspecJunitFormatter  --out result.xml\n")),(0,a.kt)("p",null,"Running tests with these parameters will format the test results into JUnit XML and pipe them into a ",(0,a.kt)("inlineCode",{parentName:"p"},"result.xml")," file (and overwrite it on subsequent runs)."),(0,a.kt)("p",null,"If we didn't want to type these parameters out every time we could place them into an RSpec command helper file (e.g., ",(0,a.kt)("inlineCode",{parentName:"p"},".rspec"),")."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ruby"},"# filename: .rspec\n\n--format RspecJunitFormatter\n--out result.xml\n")),(0,a.kt)("p",null,"If we want to run our tests in parallel (using something like ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/grosser/parallel_tests"},"parallel_tests"),"), then we will want to generate a uniquely named result file for each parallel process (otherwise concurrent test runs will overwrite the same file rendering the results effectively useless). To do that we can use interpolation thanks to ",(0,a.kt)("a",{parentName:"p",href:"http://www.stuartellis.eu/articles/erb/"},"ERB")," and an environment variable made available by parallel_tests."),(0,a.kt)("p",null,"Thankfully parallel_tests has a RSpec command helper file as well (e.g., ",(0,a.kt)("inlineCode",{parentName:"p"},".parallel_rspec"),")."),(0,a.kt)("p",null,"==",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"!! Code snippet needs validation !!")),"=="),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ruby"},"# filename: .parallel_rspec\n\n--format RspecJunitFormatter\n--out result<%= ENV['TEST_ENV_NUMBER'] %>.xml\n")),(0,a.kt)("p",null,"Now with numerous tests being run through ",(0,a.kt)("inlineCode",{parentName:"p"},"parallel_tests")," the final result will be a series of JUnit XML files (e.g., ",(0,a.kt)("inlineCode",{parentName:"p"},"result1.xml"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"result2.xml"),", etc.)."),(0,a.kt)("p",null,"And if we didn't want this to run all of the time (like if we only wanted JUnit XML output to get generated when running our tests on a CI server) then we can add a conditional to our ",(0,a.kt)("inlineCode",{parentName:"p"},".parallel_rspec")," file."),(0,a.kt)("p",null,"==",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"!! Code snippet needs validation !!")),"=="),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ruby"},"# filename: .parallel_rspec\n\n<% if ENV['CI'] %>\n--format RspecJunitFormatter\n--out results/result<%= ENV['TEST_ENV_NUMBER'] %>.xml\n<% end %>\n")),(0,a.kt)("p",null,"Now all we need to do is specify an environment variable at run time in order to trigger JUnit XML output (e.g., ",(0,a.kt)("inlineCode",{parentName:"p"},"CI=on parallel_rspec"),")."),(0,a.kt)("h2",{id:"summary"},"Summary"),(0,a.kt)("p",null,"Now you're ready to plug your Selenium tests into a CI Server and let them report the results."),(0,a.kt)("h2",{id:"about-the-author"},"About The Author"),(0,a.kt)("p",null,"Dave Haeffner is the original writer of Elemental Selenium -- a free, once weekly Selenium tip newsletter that's read by thousands of testing professionals. He also created and maintains the-internet (an open-source web app that's perfect for writing automated tests against)."),(0,a.kt)("p",null,"Dave has helped numerous companies successfully implement automated acceptance testing; including The Motley Fool, ManTech International, Sittercity, and Animoto. He is also an active member of the Selenium project and has spoken at numerous conferences and meetups around the world about automated acceptance testing."))}c.isMDXComponent=!0}}]);